<link rel="import" href="../../polymer/polymer.html">

<dom-module id="congress-member">
  <template>
    <style>
      :host {
        display: block;
        position: relative;
      }
    </style>
    <div class="item">
      <figure>
        <img src="" alt="">
      </figure>
      <figcaption><p>{{data}}</p></figcaption>
    </div>
  </template>
</dom-module>
<script>
(function() {
  Polymer({
    is: 'congress-member',
    properties: {
      key: String,
    },
    created: function() {
      key = this.getAttribute('key');
    },
    attached: function() {
      this.data = "yo!"
      xhr = new XMLHttpRequest();
      xhr.open("GET", 'https://api.propublica.org/congress/v1/114/senate/members.json', false);
      xhr.setRequestHeader("X-API-Key", process.env.congress);
      xhr.send();
      if(xhr.status === 200) {
        data = JSON.parse(xhr.responseText);
        this.data = data.results[0].members[0].first_name;
      }
      return this.data;
    },
    ready: function() {
      var thing;
    },
    observers: [
      'logFor(data)',
    ],
    logFor: function(thing) {
      console.log(thing)
    }
  });
Polymer.log = console.log.bind(console);
})();
</script>

